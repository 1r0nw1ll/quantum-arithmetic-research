{
  "schema_version": "v1",
  "cert_type": "QA_RATIONAL_TRIG_TYPE_SYSTEM.v1",
  "cert_id": "qa_rt_types_minimal_0001",
  "created_utc": "2026-02-16T17:00:00Z",
  "source_semantics": {
    "video_ref": {
      "url": "https://www.youtube.com/watch?v=x6rb-qOEXtQ",
      "timestamp_seconds": 335,
      "claim_summary": "Types are governed by formation/use rules; QA encodes RT objects as typed manifolds rather than set-membership blobs."
    },
    "rt_refs": [
      {
        "title": "A Rational Approach to Trigonometry (Wildberger, 2007)",
        "url_or_citation": "https://web.maths.unsw.edu.au/~norman/papers/RationalTrig.pdf"
      },
      {
        "title": "The ancient Greeks present: Rational Trigonometry (Wildberger, 2008)",
        "url_or_citation": "https://arxiv.org/pdf/0806.3481"
      }
    ]
  },
  "type_system": {
    "base_algebra": {
      "kind": "integral_domain",
      "assumptions": ["no_zero_divisors"]
    },
    "types": {
      "Point2": {},
      "Line2": {},
      "Triangle": {}
    },
    "formation_rules": [
      {
        "rule_id": "FR_TRIANGLE_NONCOLLINEAR",
        "inputs": ["Point2", "Point2", "Point2"],
        "outputs": ["Triangle"],
        "side_conditions": ["det([B-A, C-A]) != 0"]
      }
    ]
  },
  "rt_core": {
    "primitives": {
      "quadrance": {
        "definition": "Q(A,B) = (x2-x1)^2 + (y2-y1)^2 (Euclidean bilinear form)."
      },
      "spread": {
        "definition": "s(l1,l2) is the rational separation of lines; equals sin(angle)^2 in Euclidean case but defined algebraically without transcendentals."
      }
    },
    "laws": [
      {
        "law_id": "RT_LAW_04",
        "name": "Cross law",
        "generator_move": "derive",
        "preconditions": ["Triangle well-formed", "Q2 and Q3 defined"],
        "equation": "(Q1 - Q2 - Q3)^2 = 4*Q2*Q3*(1 - s1)",
        "outputs": ["constraint_cross_law"]
      }
    ]
  },
  "derivation": {
    "typed_state": {
      "triangle": {
        "A": [0, 0],
        "B": [1, 0],
        "C": [0, 1],
        "non_collinear_proof": "det([B-A, C-A]) = det([[1,0],[0,1]]) = 1 != 0"
      },
      "observables": {
        "Q1": 2,
        "Q2": 1,
        "Q3": 1,
        "s1": 1,
        "s2": 0.5,
        "s3": 0.5
      }
    },
    "steps": [
      {
        "step_id": "STEP_001",
        "uses_law_id": "RT_LAW_04",
        "inputs": { "Q1": 2, "Q2": 1, "Q3": 1, "s1": 1 },
        "outputs": { "lhs": 0, "rhs": 0 },
        "deterministic_hash": "74020fd252abc8df5cf99dfdd8b9bce81b021f1b5f79459f46fe01fd4cae2eb2"
      }
    ]
  },
  "determinism_contract": {
    "canonical_json": true,
    "no_rng": true,
    "stable_sorting": true,
    "hash_rule": "sha256(canonical_json({uses_law_id, inputs, outputs}))"
  },
  "invariant_diff": {
    "invariants": [
      { "name": "typed_state_well_formed", "value": true },
      { "name": "base_algebra_kind", "value": "integral_domain" }
    ],
    "diffs": [
      { "name": "constraints_added", "before": 0, "after": 1 }
    ]
  }
}
