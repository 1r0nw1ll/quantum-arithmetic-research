# QA Control Theorems (verbatim extract)

Source: `Formalizing tuple drift in quantum-native learning/files/paper1_qa_control.tex`

```tex
\begin{lemma}[SCC Monotonicity under Generator Expansion]
\label{lem:scc_mono}
If $\Sigma_1 \subseteq \Sigma_2$, then
\[
\#\mathrm{SCC}(G_{\Sigma_2}) \le \#\mathrm{SCC}(G_{\Sigma_1}).
\]
\end{lemma}
\begin{proof}
$G_{\Sigma_2}$ is obtained from $G_{\Sigma_1}$ by adding directed edges. Adding edges cannot split an SCC; it can only merge SCCs. \qed
\end{proof}

\begin{theorem}[SCC Count under $\mu$-Pairing]
\label{thm:mu_pairing}
Let $G$ be the directed transition graph on $\mathrm{Caps}(N,N)$ generated by $\Sigma$ containing $\mu$ (coordinate swap), where no other generator creates reverse paths between distinct off-diagonal states. Then the SCCs are exactly the $\mu$-orbits: $N$ diagonal singletons $\{(b,b)\}$ and $(N^2-N)/2$ off-diagonal pairs $\{(b,e), (e,b)\}$ for $b \neq e$. Thus:
\[
\#\mathrm{SCC}(G) = \frac{N^2 + N}{2}, \quad \max|\mathrm{SCC}| = 2
\]
\end{theorem}

\begin{proof}
Define $V(b,e) = e$. Under $\sigma: (b,e) \mapsto (b, e+1)$, we have $V$ increases strictly by 1. Under $\lambda_2: (b,e) \mapsto (2b, 2e)$, we have $V$ increases strictly by a factor of 2. Hence neither $\sigma$ nor $\lambda_2$ can participate in a directed cycle within the finite set $\mathrm{Caps}(N,N)$.

Therefore, all directed cycles arise solely from $\mu$. Each off-diagonal state $(b,e)$ with $b \neq e$ forms a 2-cycle with $(e,b)$ under $\mu$. Diagonal states $(b,b)$ are fixed points under $\mu$, forming singleton SCCs. 

Counting gives $N$ diagonal states plus $(N^2-N)/2$ off-diagonal pairs, yielding:
\[
\#\mathrm{SCC} = N + \frac{N^2-N}{2} = \frac{N^2+N}{2}
\]
\end{proof}

\begin{theorem}[Edge and Failure Counts]
\label{thm:edge_counts}
For $\mathrm{Caps}(N,N)$ with generators $\Sigma \subseteq \{\sigma, \mu, \lambda_2, \nu\}$, the legal transitions and failures admit closed forms:
\begin{align*}
|\sigma\text{-edges}| &= N(N-1) \\
|\mu\text{-edges}| &= N^2 \\
|\lambda_2\text{-edges}| &= \lfloor N/2 \rfloor^2 \\
|\nu\text{-edges}| &= \lfloor N/2 \rfloor^2
\end{align*}
Failures: $\sigma$ produces $N$ OUT\_OF\_BOUNDS failures (states with $e=N$). $\lambda_2$ produces $N^2 - \lfloor N/2 \rfloor^2$ OUT\_OF\_BOUNDS failures. $\nu$ produces $N^2 - \lfloor N/2 \rfloor^2$ PARITY failures (odd coordinates).
\end{theorem}

\begin{proof}
$\sigma: (b,e) \mapsto (b, e+1)$ is legal iff $e \le N-1$, giving $N(N-1)$ edges. $\mu: (b,e) \mapsto (e,b)$ is always in-bounds on square Caps, giving $N^2$ edges. $\lambda_2: (b,e) \mapsto (2b, 2e)$ is legal iff $b,e \le \lfloor N/2 \rfloor$, giving $\lfloor N/2 \rfloor^2$ edges. $\nu: (b,e) \mapsto (b/2, e/2)$ requires both coordinates even, giving $\lfloor N/2 \rfloor^2$ edges. Failure counts follow from complementary counting.
\end{proof}
```
